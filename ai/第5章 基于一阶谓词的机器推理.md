# 第5章 基于一阶谓词的机器推理

## 一阶谓词逻辑

### 谓词 函数 量词

**谓词**

表达式P(t1, t2, … , tn)称为一个n元谓词，或简称谓词。

*P*：谓词**名**(符号)，表示对象的属性、状态、关系、联系或行为。

*t*1, *t*2, … , *tn*称为谓词的**项**，代表个体对象。

个体常元：谓词的项t1, t2, … , tn为代表**具体事物**的符号或数值。

个体变元：谓词的项t1, t2, … , tn为取不同值的变元。

> prime(2) ：是**一元**谓词，表示：2是个素数；
>
> friend(张三,李四) ：是**二元**谓词，表示：张三和李四是朋友。

谓词有严格的语法格式，是一种**形式语言**，可表示自然语言命题。

谓词中的**变元**都用**特定的个体**取代时，其就具有一个确定的真值“T”或“F”。

**函数**

f (x1, x2, … , xn)表示个体x1, … , xn所对应的个体y，称为（n元）个体函数，简称函数，f是函数符号。

> doctor(father(Li))表示：小李的父亲是医生
>
> equa(sqrt(*x*), *y*))表示：*x*的平方等于*y*

- 大写英文字母——谓词符号

- 小写字母f, g, h——函数符号

- 小写字母x, y, z——个体**变元**符号

- 小写字母a, b, c——个体**常元**符号

**量词**

全称量词$\forall$：“所有”、“一切”、“任一”、“全体”、“凡是”等词统称为全称量词。

存在量词$\exist$：“存在”、“一些”、“有些”、“至少有一个”等词统称为存在量词。

**连词**

合取词∧：表示“并且”，“与”的关系。

析取词∨：表示“或者”的关系。

蕴涵词→（或“=>”）：表示“如果…则”的关系。

否定词Ø （或“～”）：表示“非”，对后面命题的否定。

等价词↔或（“<->”）：表示“当且仅当”。

**一阶谓词**

仅个体变元被量化，即量词$\forall$和$\exist$ 只作用于个体。

量词除作用在个体上之外，如果量词也作用在谓词符号和函数符号上，就是二阶逻辑谓词。

### 谓词公式

**原子公式**

谓词符号和若干项组成的谓词演算。

P(x1,x2,…,xn)是n元谓词演算的原子(谓词)公式。其中P为n元谓词， x1,x2,...,xn为客体变量或变元。

**分子公式**

用连词把原子谓词公式组成复合谓词公式。

**合式公式**

用归纳法给出合式公式的递归定义：

① 原子谓词公式是合式公式。

② 若A为合式公式，则“¬A”（或“～A”）也是一个合式公式。

③ 若A,B是合式公式，则A∨B，A∧B，A→B，A↔B也都是合式公式。

④ 若A是合式公式，x为A的自由变元，则 (∀x)A和(∃x)A都是合式公式。

⑤ 只有按上述规则①至④求得的那些公式，才是合式公式。

量词辖域：紧接量词后、被量词作用(说明或限定)的命题函数式。例如：

### 自然语言命题的谓词形式表示

首先定义谓词，然后再用连接词把有关的谓词连接起来，形成一个谓词公式。

对于简单命题，直接用原子公式来表示。

对于复合命题，先找出支命题，并将其符号化为原子公式再根据支命题间的逻辑关系选用合适的连词和量词，用连接词将这些原子公式连接起来。

① 刘欢比他父亲出名。

```
FAMOUS(LiuHuan, father(LiuHuan))
```

② 高扬是计算机系的一名学生，但他不喜欢编程。

```
COMPUTER(Gaoyang^¬LIKE(Gaoyang, programing))
```

③ 任何整数或者为正或者为负。

```
(∀x)(I(x)→(P(x)∨N(x)))
```

④ 凡是人都有名字

```
∀x(P(x)→N(x))      
```

⑤ 存在不是偶数的整数

```
∃x(INT(x)^E(x))
```

若P、Q是两个合式公式，则由P、Q所组成的复合表达式可由下列真值表给出。

![image-20230125172616357](C:/Users/86158/AppData/Roaming/Typora/typora-user-images/image-20230125172616357.png)

如果两个合式公式，无论如何解释，其真值表都相同，那么此两个合式公式是**等价**的。

- 否定之否定： ～(～P)等价于P

- P∨Q等价于： **～P=>Q**

- 狄·摩根定律：～(P∨Q)等价于～P∧～Q        

  ～(P∧Q)等价于～P∨～Q

- 分配律：    P∧(Q∨R)等价于(P∧Q)∨(P∧R)

  P∨(Q∧R)等价于(P∨Q)∧(P∨R)

- 交换律：    P∧Q等价于Q∧P

  P∨Q等价于Q∨P

- 结合律：    (P∧Q)∧R等价于P∧(Q∧R)

​        (P∨Q)∨R等价于P∨(Q∨R)

- 逆否律：    P=>Q等价于～Q=>～P

- ～(∃x)P(x) 等价于： (∀ x)［～P(x)］

  ～(∀x)P(x) 等价于： (∃ x)［～P(x)］

- (∀ x)［P(x)∧Q(x)］ 等价于： (∀ x)P(x)∧(∀ x)Q(x)
(∀ x)［P(x)∨Q(x)］ 等价于： (∀ x)P(x)∨(∀ x)Q(x)

- (∀ x)P(x) 等价于： (∀ y)P(y)

  (∃ x)P(x) 等价于： (∃ y)P(y)

> 用谓词公式表示命题：不存在最大的整数。
>
> 1. 定义谓词：I(x)：x为整数，D(x, y)：x大于y。
> 2. 原命题形式可转化为：¬∃x(I(x)∧∀y(I(y)=>D(x,y)))

> 对于所有的自然数*x*, *y*，均有*x*+*y*>*x*。用谓词公式表示之。
>
> 1. 定义谓词：N(x)：x为整数，s(x,y)：函数s=x+y，D(x,y)：x大于y
> 2. 原命题形式可转化为：∀x∀y(N(x)^N(y)=>D(S(x,y),x))

> 某些人对某些食物过敏
>
> 1. 定义谓词：P(x)：x是人，F(x)：x是食物，A(x,y)：x对y过敏
> 2. 原命题形式可转化为：∃x∃y(P(x)^F(y)^A(x,y))

### 基于谓词公式的形式演绎推理

设有前提：

​     （1）凡是大学生都学过计算机；

​     （2）小王是大学生。

试问：小王是否学过计算机。

![image-20230125201436079](C:/Users/86158/AppData/Roaming/Typora/typora-user-images/image-20230125201436079.png)

## 归结演绎推理

基于谓词公式的形式演绎推理是基于一种称为归结原理(亦称消解原理principle of resolution)推理规则的推理方法。鲁滨逊1965年首先提出的，又称为鲁滨逊归结原理。谓词逻辑中一个相当有效的**机械化推理**方法。该推理方式为**自动推理**，特别是**定理机器证明领域**的重大突破。

要证明P→Q永真，只需证明P∧﹁Q是不可满足即可。

任何文字**析取式**称为**子句**。例：

 	P(x)∨Q(x)，P(x，f(x))∨Q(x，g(x))都是子句。

 	P∨Q∨﹁R为子句

​	P(x, y)∨﹁ Q(x)为子句。

不含任何文字的子句称为空子句。

在谓词逻辑中，任何一个谓词公式都可以通过应用等价关系及推理规则化成相应的子句集。

对一个谓词公式G，通过以下步骤所得的子句集合S，称为G的子句集。

1. 消去蕴含词→和等值词**↔**。

   可使用逻辑等价式：P→Q   等价于  ﹁ P∨Q，P**↔**Q   等价于  (﹁ P∨Q)∧(﹁ Q∨P)

   > (∀x)((∀y)P(x,y)→﹁ (∀y)**(**Q(x,y)→R(x,y)))  经等价变化后为：(∀x)(﹁(∀y)P(x,y)∨﹁ (∀y)(﹁Q(x,y)∨R(x,y)))

2. 缩小否定词﹁的作用范围，直到其仅作用于原子公式。

   反复使用双重否定律：﹁(﹁P) ⇔ P

   摩根定律： ﹁(P∧Q) ⇔﹁P∨﹁Q

   ​        ﹁(P∨Q) ⇔﹁P∧﹁Q

   量词转换律：﹁(∀x)P(x) ⇔ (∃x) ﹁P(x)

   ​        ﹁(∃x)P(x) ⇔ (∀x)￢P(x)

   将“﹁”移到紧靠谓词的位置，使得每个否定符号最多只作用于一个谓词上。

   > (∀x)(﹁(∀y)P(x,y)∨﹁ (∀y)(﹁Q(x,y)∨R(x,y)))    经等价变换为：
   >
   > (∀x)((∃y)﹁P(x，y)∨(∃y)( Q(x，y) ∧﹁R(x，y)))

3. 适当改名，使量词间不含同名指导变元和约束变元。即：使不同量词约束的变元有不同的名字。

   > (∀x)((∃y)﹁P(x，y)∨(∃y)( Q(x，y) ∧﹁R(x，y)) 变换为：
   >
   > (∀x)((∃y)﹁P(x，y)∨(∃z)( Q(x，z) ∧﹁R(x，z)))

4. 消去存在量词。

   若该存在量词在某些全称量词的辖域内，则用这些全称量词指导变元的一个函数代替该存在量词辖域中的相应约束变元。这样的函数被称为Skolem函数。

   例：(∀x1)…(∀xn) (∃y)P(x1，x2 ,…, xn ,y)

     需Skolem函数f(x1，x2 ,…, xn)替换受该存在量词约束的变元y，并消去该存在量词。

5. 消去所有全称量词。

   由于母式中的全部变元均受全称量词的约束，且全称量词的次序已无关紧要，因此可省掉全称量词。

   > (∀x)((﹁P(x,f(x))∨Q(x,g(x))∧(﹁P(x,f(x))∨﹁R(x,g(x))))
   >
   >    消去全称量词后为：(﹁P(x,f(x))∨Q(x,g(x)) ∧(﹁P(x,f(x))∨﹁R(x,g(x)))

6. 化公式为合取范式。

   可使用逻辑等价式：

   ​    P∨(Q∧R)      等价于     (P∨Q)∧(P∨R)

   ​    (P∧Q)∨R      等价于     (P∨R)∧(Q∨R)

7. 适当改名，使子句间无同名变元。

   对子句集中的某些变量重新命名，使任意两子句间不出现相同的变量名。

8. 消去合取词∧，以子句为元素组成集合S。

   在母式中消去所有合取词，把母式用子句集的形式表示出来。子句集中的每一个元素都是一个子句。

   > 例如:
   >
   > 上页公式 (﹁P(x,f(x))∨Q(x,g(x)) ∧﹁P(y,f(y))∨﹁R(y,g(y)))
   >
   > 取消合取词后，子句集中包含以下两个子句:
   >
   > ​        ｛﹁P(x,f(x))∨Q(x,g(x)) ，﹁P(y,f(y))∨﹁R(y,g(y)) ｝

设*L*为一个文字，则称*L*与﹁ *L*为互补文字。

设C1,C2是命题逻辑中的两个子句。C1中有文字L1，C2中有文字L2，且L1与L2互补。从C1,C2中分别删除L1,L2，再将剩余部分析取起来，记构成的新子句为C12。则称C12为C1,C2的归结式(或消解式)，C1,C2称为其归结式的亲本子句， L1, L2称为消解基。

## 替换与合一

假元推理：由合式公式W1和W1⇒W2产生合式公式W2的运算。

全称化推理：由合式公式（∀x）W（x）产生合式公式W（A） ，其中A为任意常量符号。

综合推理：同时应用上述两个公式 ，即由（∀x）[W1（x） →W2（x）]和W1（A）生成合式公式W2（A）。

### 替换

替换：用常量、函数替换变元，使该变元不在公式中出现。

ti/xi表示用ti项替换变元xi，不允许ti和xi相同。例如：{a/x , f(b)/y , w/z}是一个替换，{g(y)/x , f(x)/y} 不是一个替换。

**例** 表达式 P[x , f(y) , B]的替换项分别为：

于是，P[x, f(y), B]的4个替换分别如下：

①s1={ z/x, w/y}:      P[x, f(y), B] s1 = P[z, f(w), B] 

②s2={ A/y}:           P[x, f(y), B] s2 = P[x, f(A), B] 

③ s3={ q(z)/x , A/y}:    P[x,f(y), B] s3 = P[q(z), f(A), B] 

④ s4={ c/x , A/y}:       P[x, f(y), B] s4 = P[c, f(A), B]

替换式可结合的：(s1s2)s3 = s1(s2s3) 

置换是不可交换的：s1s2 ≠ s2s1

### 合一

寻找项对变量的替换，以使两表达式一致。可合一：如果一个替换s作用于表达式集${E_i}$的每个元素，则用${E_i}s$表示替换的集，称表达式集${E_i}$是可合一的。

## 谓词逻辑法

### 优点

- 自然：接近于自然语言和对问题直观理解的形式语言系统。

- 明确：所表示的知识明确、易理解，是一种标准的知识解释法。

- 精确：真值只有“真”与“假”，其表示、推理都很精确。

- 灵活：知识和处理知识的程序是分开的，无须考虑处理知识的细节。

- 模块化：知识间相对独立，使得添加、删除、修改知识较易实现。

### 缺点

- 表示能力差
  - 只能表示确定性知识
  - 不能表示非确定性知识、过程性知识和启发式知识。

- 知识库管理困难：缺乏知识的组织原则，知识库管理困难。

- 组合爆炸：由于难以表示启发式知识，而导致盲目使用推理规则。当系统知识量较大时，易发生组合爆炸。

- 系统效率低：将推理演算与知识含义截然分开，抛弃了表达内容中所含有的语义信息，使推理过程冗长，降低了系统的效率。







